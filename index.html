<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Learn AI</title>

<style>
body {
  font-family: system-ui, sans-serif;
  margin: 0;
  background: #f4f6fb;
}
header {
  background: #2563eb;
  color: white;
  padding: 15px;
  text-align: center;
}
.card {
  background: white;
  padding: 15px;
  margin: 15px;
  border-radius: 10px;
}
button {
  width: 100%;
  padding: 10px;
  border: none;
  border-radius: 6px;
  background: #2563eb;
  color: white;
  margin-top: 8px;
}
input {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
}
</style>
</head>

<body>

<header>
  <h2>Learn AI</h2>
</header>

<!-- 👤 AUTH -->
<div class="card">
  <h3>Login / Sign up</h3>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login / Signup</button>
  <p id="userStatus"></p>
</div>

<!-- 🧠 QUIZ -->
<div class="card">
  <h3 id="question">Loading...</h3>
  <div id="options"></div>
  <p id="score"></p>
  <button onclick="nextQuestion()">Next</button>
</div>

<!-- 🤖 AI CHAT -->
<div class="card">
  <h3>AI Tutor 🤖</h3>
  <input id="userInput" placeholder="Ask a question...">
  <button onclick="askAI()">Ask AI</button>
  <p id="aiResponse"></p>
</div>

<!-- 🔥 FIREBASE SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
/* 🔥 FIREBASE CONFIG (REPLACE WITH YOUR OWN) */
const firebaseConfig = {
  apiKey: "YOUR_FIREBASE_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT",
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

/* 👤 LOGIN */
function login() {
  const email = email.value;
  const password = password.value;

  auth.signInWithEmailAndPassword(email, password)
    .catch(() => auth.createUserWithEmailAndPassword(email, password))
    .then(user => {
      document.getElementById("userStatus").innerText =
        "Logged in as " + auth.currentUser.email;
    });
}

/* 🧠 QUIZ DATA */
const quiz = [
  {q:"What is AI?",o:["Artificial Intelligence","Auto Internet","Advanced Input"],a:0},
  {q:"AI learns from?",o:["Data","Battery","Speaker"],a:0},
  {q:"CPU means?",o:["Central Processing Unit","Computer Power Unit","Core Power"],a:0}
];

let i = 0, score = 0, answered = false;

function loadQuiz() {
  answered = false;
  question.innerText = quiz[i].q;
  scoreEl.innerText = "Score: " + score;
  options.innerHTML = "";
  quiz[i].o.forEach((opt, idx) => {
    const b = document.createElement("button");
    b.innerText = opt;
    b.onclick = () => check(idx, b);
    options.appendChild(b);
  });
}

function check(ans, btn) {
  if (answered) return;
  answered = true;
  if (ans === quiz[i].a) {
    btn.style.background = "green";
    score++;
  } else {
    btn.style.background = "red";
  }
  scoreEl.innerText = "Score: " + score;
}

function nextQuestion() {
  if (i < quiz.length - 1) {
    i++;
    loadQuiz();
  } else {
    saveScore();
    alert("Quiz finished!");
    i = 0;
    score = 0;
    loadQuiz();
  }
}

/* 💾 SAVE SCORE ONLINE */
function saveScore() {
  if (!auth.currentUser) return;
  db.collection("scores").add({
    user: auth.currentUser.email,
    score: score,
    time: Date.now()
  });
}

loadQuiz();

/* 🤖 ONLINE AI CHAT (SECURE) */
async function askAI() {
  const q = userInput.value;
  aiResponse.innerText = "Thinking...";

  const res = await fetch("https://YOUR-BACKEND-URL/chat", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ message: q })
  });

  const data = await res.json();
  aiResponse.innerText = data.reply;
}
</script>

</body>
</html>
